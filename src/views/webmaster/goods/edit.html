<!DOCTYPE html>

<html>
  <head>
    <title>Dashboard - Electronic Commerce Platform</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    {{template "styles"}}
  </head>
  <body>
    <div id="leftside">
      {{template "leftside" .}}
    </div>

    <div id="rightside">

      <div class="main">

        <a href="javascript:void(0);" onclick="history.back(-1)"><span class="glyphicon glyphicon-arrow-left"></span> Back</a>

        <h3>Create New Goods</h3>

        <form class="create-form">
          <div class="form-group">
            <label for="EditTitle">Title</label>
            <input type="text" class="form-control" id="EditTitle" placeholder="Enter title" disabled="disabled" />
          </div>
          <div class="form-group">
            <label for="EditCategory">Category</label>
            <select class="form-control" id="EditCategory">
              <option value="">请选择</option>
              {{range $index, $item := .CategoryList}}
              <option>{{$item.Name}}</option>
              {{end}}
            </select>
          </div>
          <div class="form-group">
            <label for="EditContent">Content</label>
            <textarea class="form-control" id="EditContent"></textarea>
          </div>
          <div class="form-group">
            <label for="EditOrigin">Origin</label>
            <select class="form-control" id="EditOrigin">
              <option value="">请选择</option>
              {{range $index, $item := .CategoryList}}
              <option>{{$item.Name}}</option>
              {{end}}
            </select>
          </div>
          <div class="form-group">
            <label for="EditUnit">Unit</label>
            <input type="text" class="form-control" id="EditUnit" placeholder="Enter unit, eg: 1公斤、150克、1袋" />
          </div>
          <div class="form-group">
            <label for="EditPrice">Price</label>
            <input type="text" class="form-control" id="EditPrice" placeholder="Enter price, eg: 199.00" />
          </div>
          <div class="form-group">
            <label for="EditShop">Shop</label>
            <input type="text" class="form-control" id="EditShop" placeholder="Enter shop name, eg: 广州稻草人" />
          </div>
          <div class="form-group">
            <label for="EditBuyLink">BuyLink</label>
            <input type="text" class="form-control" id="EditBuyLink" placeholder="Enter buy link, eg: http://gzdcr.com" />
          </div>
          <div class="form-group">
            <label for="EditImages">Images</label>
            <textarea class="form-control" id="EditImages"></textarea>
          </div>
          <div class="form-group">
            <label for="EditCertificates">Certificates</label>
            <textarea class="form-control" id="EditCertificates"></textarea>
          </div>
          <div class="form-group">
            <label for="EditStatus">Status</label>
            <select class="form-control" id="EditStatus">
              <option value="0">待售</option>
              <option value="1">上架</option>
              <option value="2">缺货</option>
              <option value="3">下架</option>
              <option value="4">禁售</option>
            </select>
          </div>

          <input type="hidden" id="EditId" />
          <button type="button" class="btn btn-primary" onclick="SubmitEditForm()">Submit</button>
          <button type="button" class="btn btn-default" onclick="InitForm()">Reset</button>
        </form>

      </div>
    </div>

    <div class="clear"></div>

    {{template "scripts"}}
    <script>
      $(function(){
        InitForm()
      });
      function InitForm(){
        $('#EditId').val({{.Goods.Id}});
        $('#EditTitle').val({{.Goods.Title}});
        $('#EditCategory').val({{.Goods.Category}});
        $('#EditContent').val({{.Goods.Content}});
        $('#EditOrigin').val({{.Goods.Origin}});
        $('#EditUnit').val({{.Goods.Unit}});
        $('#EditPrice').val({{.Goods.Price}});
        $('#EditShop').val({{.Goods.Shop}});
        $('#EditBuyLink').val({{.Goods.BuyLink}});
        $('#EditImages').val({{.Goods.Images}});
        $('#EditCertificates').val({{.Goods.Certificates}});
        $('#EditStatus').val({{.Goods.Status}});
      }
      function SubmitEditForm(){
        var id = $('#EditId').val();
        var title = $('#EditTitle').val();
        var category = $('#EditCategory').val();
        var content = $('#EditContent').val();
        var origin = $('#EditOrigin').val();
        var unit = $('#EditUnit').val();
        var price = $('#EditPrice').val();
        var shop = $('#EditShop').val();
        var buylink = $('#EditBuyLink').val();
        var images = $('#EditImages').val();
        var certificates = $('#EditCertificates').val();
        var status = $('#EditStatus').val();

        $.ajax({
         type: 'POST',
         url: '/webmaster/goods/edit',
         data: {
           id: id,
           title: title,
           category: category,
           content: content,
           origin: origin,
           unit: unit,
           price: price,
           shop: shop,
           buylink: buylink,
           images: images,
           certificates: certificates,
           status: status
         },
         success: function(data) {
           location.reload();
         },
         dataType: 'text'
        });
      }
    </script>
  </body>
</html>